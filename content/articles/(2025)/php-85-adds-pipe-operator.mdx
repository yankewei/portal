---
title: ğŸš€ PHP 8.5 æ–°ç‰¹æ€§ï¼šç®¡é“ç¬¦ |> ç»ˆäºæ¥äº†ï¼Œç”¨è¿‡éƒ½è¯´çˆ½ï¼
---

> **ä¸€å¥è¯æ€»ç»“ï¼š**  
> `|>` æ˜¯â€œå°è¯­æ³•ï¼Œå¤§èƒ½é‡â€ã€‚å®ƒè®©ä½ çš„ä»£ç åƒè¯»è‡ªç„¶è¯­è¨€ä¸€æ ·æµç•…ï¼Œå½»åº•å‘Šåˆ«åµŒå¥—åœ°ç‹±ã€‚

---

## ğŸ’¡ TL;DRï¼ˆçœ‹è¿™ä¸€èŠ‚å°±å¤Ÿï¼‰

- `|>` æŠŠå·¦ä¾§è¡¨è¾¾å¼çš„å€¼ï¼Œ**ä½œä¸ºå‚æ•°ä¼ ç»™å³ä¾§çš„å‡½æ•°æˆ– callable**ã€‚  
- å…³é”®æ„ä¹‰ä¸åœ¨â€œèƒ½ä¸èƒ½å†™â€ï¼Œè€Œåœ¨äº **å¯è¯»æ€§ä¸é“¾å¼ç»„åˆèƒ½åŠ›**ã€‚  
- å®ƒä¸ **ä¸€ç­‰å¯è°ƒç”¨ï¼ˆfirst-class callablesï¼‰** é…åˆå¾—å¤©è¡£æ— ç¼ã€‚  
- è¿™ä¸€ç‰¹æ€§ç»å†äº†å¤šè½®ææ¡ˆã€å–èˆå’Œæ”¹è¿›ï¼Œç»ˆäºåœ¨ **PHP 8.5 æ­£å¼è½åœ°**ã€‚  

---

## ğŸ§© 1. å®ƒåˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ

è¯­æ³•ä¸€çœ¼å°±æ‡‚ï¼š

```php
$result = "Hello World" |> strlen(...);
// ç­‰ä»·äº
$result = strlen("Hello World");
```

çœŸæ­£çš„å¨åŠ›æ¥è‡ªâ€œé“¾å¼ç®¡é“â€ï¼š

```php
$arr = [
  new Widget(tags: ['a','b','c']),
  new Widget(tags: ['c','d','e']),
  new Widget(tags: ['x','y','a']),
];

$result = $arr
  |> fn($x) => array_column($x, 'tags')
  |> fn($x) => array_merge(...$x)
  |> array_unique(...)
  |> array_values(...);

// ç»“æœï¼š['a','b','c','d','e','x','y']
```

å¯¹æ¯”æ²¡æœ‰ç®¡é“æ—¶çš„å†™æ³•ï¼š

```php
array_values(array_unique(array_merge(...array_column($arr,'tags'))));
```

æ˜¯ä¸æ˜¯ç¬é—´â€œè¯»ä¸ä¸‹å»â€ï¼Ÿ  
æœ‰äº† `|>`ï¼Œè¿™ç±»â€œæµæ°´çº¿å¼â€çš„é€»è¾‘ç»ˆäºèƒ½**è‡ªç„¶é¡ºçœ¼**åœ°å†™å‡ºæ¥ã€‚  

---

## ğŸ§  2. å’Œå‘½ä»¤è¡Œçš„ `|` æœ‰ç‚¹åƒï¼Ÿ

æ˜¯çš„ï¼Œ**æ€æƒ³ä¸€è‡´**ï¼šå·¦è¾¹çš„è¾“å‡ºå°±æ˜¯å³è¾¹çš„è¾“å…¥ã€‚  
ä¸åŒçš„æ˜¯ï¼ŒPHP çš„ç®¡é“å³ä¾§æ˜¯ **callable**ï¼Œæ­é… `(... )` çš„ä¸€ç­‰å¯è°ƒç”¨è¯­æ³•ï¼Œéå¸¸é¡ºæ‰‹ã€‚

---

## ğŸ•°ï¸ 3. ä¸ºä»€ä¹ˆç°åœ¨æ‰æœ‰ï¼Ÿ

ç®€å•å›é¡¾ä¸€ä¸‹å†ç¨‹ï¼š

- **2016**ï¼šSara Golemon æè¿‡æŠŠ Hack/HHVM çš„ç®¡é“è¯­æ³•æ¬æ¥ PHPï¼Œä½†è¯­æ³•å¤ªç‰¹ç«‹ç‹¬è¡Œï¼Œæœªé€šè¿‡ã€‚  
- **2020/2021**ï¼šç¤¾åŒºè½¬å‘â€œåå‡½æ•°åº”ç”¨ï¼ˆPFAï¼‰â€ä¸â€œä¸€ç­‰å¯è°ƒç”¨â€ï¼Œåè€…ç‡å…ˆè½åœ°ã€‚  
- **2025**ï¼šåœ¨ PHP Foundation å›¢é˜Ÿï¼ˆIlija Toviloã€Arnaud Le Blancï¼‰æ¨åŠ¨ä¸‹ï¼Œç¬¬ä¸‰æ¬¡ææ¡ˆç»ˆäºé€šè¿‡ã€‚

---

## âš™ï¸ 4. ä¸æ­¢â€œæ›´å¥½çœ‹â€ï¼šå®ƒèƒ½å åŠ å¢ç›Šï¼

### âœ… åœ¨ `match` ä¸­æ›´ä¼˜é›…

```php
$newString = match ($format) {
  'snake_case' => $string
      |> splitString(...)
      |> fn($x) => implode('_', $x)
      |> strtolower(...),

  'lowerCamel' => $string
      |> splitString(...)
      |> fn($x) => array_map(ucfirst(...), $x)
      |> fn($x) => implode('', $x)
      |> lcfirst(...),
};
```

å•è¡¨è¾¾å¼å†™æ³•ï¼Œé€»è¾‘é¡ºã€æ— ä¸­é—´å˜é‡ï¼Œçœ‹å¾—ä¹Ÿèˆ’æœã€‚

---

### âœ… åƒæ‰©å±•æ–¹æ³•ä¸€æ ·é“¾å¼å†™

å¦‚æœå³è¾¹æ˜¯è¿”å›é—­åŒ…çš„å‡½æ•°ï¼Œå°±èƒ½åƒæ‰©å±•æ–¹æ³•ä¸€æ ·ç»§ç»­é“¾ä¸‹å»ã€‚  
æ›´è‡ªç”±ï¼Œä¸å±€é™äºè¯­è¨€å†…ç½®æ–¹æ³•ã€‚

---

### âœ… â€œç©ºå€¼å®‰å…¨â€çš„ Maybe é£æ ¼

```php
function maybe(\Closure $c): \Closure {
  return fn(mixed $arg) => $arg === null ? null : $c($arg);
}

$profit = [1,4,5]
  |> maybe(loadSeveral(...))
  |> maybe(filter(isOnSale(...)))
  |> maybe(map(sellWidget(...)))
  |> maybe(array_sum(...));
```

è¿™å‡ è¡Œå…¶å®å°±æ˜¯ä¸€ä¸ªè¿·ä½ ç‰ˆçš„ **Maybe Monad**ï¼Œè®©æ•´æ¡é“¾å¤©ç„¶ç©ºå€¼å®‰å…¨ã€‚

---

## ğŸ§© 5. å’Œâ€œæ ‡é‡æ–¹æ³•â€æœ‰å•¥ä¸åŒï¼Ÿ

ä¸¤è€…ç›®æ ‡ç›¸ä¼¼ï¼šéƒ½è®©é“¾å¼å¤„ç†æ›´é¡ºæ»‘ã€‚  
åŒºåˆ«åœ¨äºï¼š  
- æ ‡é‡æ–¹æ³•æ˜¯ PHP å®˜æ–¹å®šä¹‰çš„ä¸€å°æ’®ã€‚  
- `|>` åˆ™æ˜¯é€šç”¨è¯­æ³•ï¼Œ**ä»»æ„å‡½æ•°éƒ½èƒ½å‚ä¸ç®¡é“**ã€‚

---

## âš ï¸ 6. æœ‰å“ªäº›æ³¨æ„ç‚¹ï¼Ÿ

- **å³ä¾§å¿…é¡»æ˜¯ callable**ã€‚å¸¸è§å†™æ³•æ˜¯ `fn($x) => ...` æˆ– `strlen(...)`ã€‚  
- **å¤šå‚æ•°å‡½æ•°æ€ä¹ˆåŠï¼Ÿ**  
  - ä¸´æ—¶æ–¹æ¡ˆï¼š`fn($x) => some($x, $other)`  
  - ç†æƒ³æ–¹æ¡ˆï¼šç­‰ **åå‡½æ•°åº”ç”¨ PFA** è½åœ°ï¼ˆè¿›è¡Œä¸­ ğŸ‘€ï¼‰

---

## ğŸ”­ 7. æ¥ä¸‹æ¥ï¼šPFA ä¸å‡½æ•°ç»„åˆæ“ä½œç¬¦

- **åå‡½æ•°åº”ç”¨ï¼ˆPFAï¼‰**ï¼šå…è®¸ç”¨ `?` å ä½æ¥â€œéƒ¨åˆ†åº”ç”¨â€å‡½æ•°ï¼Œæ¯”å¦‚ï¼š

```php
some_func(?, 5, ?, 3)
```

å®ƒå°†å’Œ `|>` æˆä¸ºå®Œç¾æ­æ¡£ã€‚  

- **å‡½æ•°ç»„åˆæ“ä½œç¬¦**ï¼šç”¨äºåˆæˆæ–°å‡½æ•°ï¼ˆæ¯”å¦‚æŠŠå¤šæ¬¡ `map()` åˆå¹¶ï¼‰ã€‚  
  é¢„è®¡åœ¨ **PHP 8.6** ç™»åœºã€‚

---

## ğŸ§° 8. è½åœ°å»ºè®®ï¼ˆç»™å›¢é˜Ÿï¼‰

1. ä¼˜å…ˆæ”¹å†™åµŒå¥—æœ€æ·±çš„ array_/str_ è¡¨è¾¾å¼ã€‚  
2. å¼•å…¥â€œå‡½æ•°å·¥å…·ç®±â€ï¼šå¦‚è¿”å›é—­åŒ…çš„ `map(fn)` / `filter(fn)`ã€‚  
3. çº¦å®šï¼šå¸¦é¢å¤–å‚æ•°æ—¶ç”¨ `fn($x) => ...` åŒ…è£¹ï¼Œæœªæ¥å¯æ›¿æ¢ä¸º PFAã€‚  
4. å°½é‡åœ¨ `match`ã€ä¸‰å…ƒã€æ•°ç»„æ„é€ ç­‰åœºæ™¯ä¿æŒâ€œå•è¡¨è¾¾å¼çº¯åº¦â€ã€‚  
5. åˆ¶ä½œä¸€é¡µå›¢é˜Ÿå†…éƒ¨ **Cheatsheet**ï¼ˆæ—§å†™æ³• â†’ ç®¡é“å†™æ³•ï¼‰ã€‚

---

## ğŸ§® 9. ç¤ºä¾‹é€Ÿè®°ï¼ˆå¯è´´ Wikiï¼‰

**æ•°ç»„ç»Ÿè®¡ï¼š**

```php
$total = $orders
  |> fn($x) => array_map(getAmount(...), $x)
  |> array_sum(...);
```

**å­—ç¬¦ä¸²æ ¼å¼åŒ–ï¼š**

```php
$slug = $title
  |> trim(...)
  |> strtolower(...)
  |> fn($x) => preg_replace('/\s+/', '-', $x);
```

**match é‡Œçš„æ•°æ®æ¸…æ´—ï¼š**

```php
$val = match(true) {
  $isCsv  => $raw |> parseCsv(...),
  $isJson => $raw |> json_decode(..., associative: true),
  default => [],
};
```

---

## âœï¸ æœ€åä¸€å¥è¯

> `|>` æ˜¯ PHP 8.5 æœ€å€¼å¾—å°è¯•çš„æ–°ç‰¹æ€§ã€‚  
> å®ƒè®©ä½ çš„ä»£ç ä»â€œåµŒå¥—åœ°ç‹±â€èµ°å‘â€œè¯­ä¹‰æµç•…â€ï¼Œ  
> æ˜¯ä¸€æ¬¡è®© PHP çœŸæ­£è¯»èµ·æ¥åƒäººè¯çš„è¿›åŒ–ã€‚  

---

## ğŸ“š å‚è€ƒæ¥æº

- The PHP Foundationï¼šã€ŠPHP 8.5 Adds Pipe Operator: What it meansã€‹ï¼ˆ2025-07-11ï¼‰

---